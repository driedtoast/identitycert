#!/bin/sh
RUNNING_DIR=`pwd`
CURR_DIR=$RUNNING_DIR
if [ $2 ] ; then
	CURR_DIR=$2
else
	CURR_DIR=`dirname $0`
fi

BASE_DIR="$CURR_DIR/../third-party"
cd $BASE_DIR
BASE_DIR=`pwd`
cd $RUNNING_DIR

SCRIPT_DIR="bin"
DATA_DIR="share"
LIB_DIR="lib/site-packages"

mkdir -p "$BASE_DIR/$SCRIPT_DIR"
mkdir -p "$BASE_DIR/$DATA_DIR"
mkdir -p "$BASE_DIR/$LIB_DIR"


if [ ! $PYTHONPATH ]; then
	export PYTHONPATH="$BASE_DIR/$LIB_DIR"
else
	export PYTHONPATH="$BASE_DIR/$LIB_DIR:$PYTHONPATH"
fi


cd $1

echo "[install]" >> "setup.cfg"
echo "install_scripts = $BASE_DIR/$SCRIPT_DIR" >> "setup.cfg"
echo "install_data = $BASE_DIR/$DATA_DIR" >> "setup.cfg"
echo "install_lib = $BASE_DIR/$LIB_DIR" >> "setup.cfg"

python setup.py install
